<!DOCTYPE html>
<html lang="en">

<head>
    {{> header}}
    <link rel="stylesheet" type="text/css" href="/css/admin-edit.css">
    <title> HNNews :: QTV :: Trang chủ </title>
</head>

<body>
    <div class="container">
        <div class="row" style="margin: 0;">
            {{!-- Navbar of Admin --}}
            <div class="col-md-1" style="padding: 0; height: initial !important;">
                <div class="row admin-nav">
                    <div class="col-md-11 nav-col-1st">
                        <div class="nav-top">
                            <a href="/admin-dashboard">
                                <img class="img-logo" src="/img/general/logo.png" alt="HN News">
                            </a>
                            <div class="line-support"></div>
                            <div class="row menu-bar">
                                <div class="col-md-12 row-img">
                                    <a class="img-click" href="">
                                        <img class="menu-icon active" src="/img/admin-menuicon/posts.png"></a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-bottom">
                            <div class="line-support"></div>
                            <div style="height: initial;">
                                ADMIN PAGE
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1 nav-col-2nd">
                        <div class="shadowbox-admin-nav"></div>
                    </div>
                </div>
            </div>

            {{!-- Content --}}
            <div class="col-md-11 content-here">

                {{!-- Account --}}
                <div class="row content" id="admin-tag" style="margin: 0;">
                    <div class="col-md-12" style="padding: 0;">
                        {{!-- Topbar --}}
                        <div class="row top-bar">
                            <div class="col-md-8 topbar-title">
                                <div class="topbar-title-text-1"> QUẢN LÝ </div>
                                <div class="topbar-title-text-2"> DANH SÁCH TÀI KHOẢN </div>
                            </div>
                            <div class="col-md-3 topbar-account">
                                <div class="topbar-account-text-1"> TRẦN HẠO NAM </div>
                                <div class="topbar-account-text-2"> Quản trị viên </div>
                            </div>
                            <div class="col-md-1 topbar-avatar">
                                <img class="topbar-avatar-img" src="/img/general/admin-avatar.png">
                            </div>
                        </div>

                        {{!-- Content inside --}}
                        <div class="container-content-here">
                            {{!-- View --}}
                            <div class="row content-inside">
                                <div class="col-md-12 account-page">
                                    <div class="row account-page-title">
                                        <p class="page-title"> THÔNG TIN CHI TIẾT </p>
                                    </div>
                                    {{#if error}}
                                    <div class="row alert alert-danger" style="height: initial; margin: 20px 0px;"
                                        role="alert"> Không tìm thấy dữ liệu, lỗi tài khoản. <a href="/admin-dashboard"
                                            class="alert-link"> &nbsp; Quay trở về</a>
                                    </div>
                                    {{else}}
                                    {{#ifEquals rolename "user"}}
                                    <form class="row" method="POST" style="height: initial;"
                                        action="/admin-dashboard/deleteuser">
                                        {{#each user}}
                                        <div class="col-md-2 form-group">
                                            <label class="label-page" for="user-id"> #ID </label>
                                            <input readonly type="text" class="form-control page-input" id="user-id"
                                                name="userid" value="{{user_id}}">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label class="label-page" for="user-name"> Họ và tên </label>
                                            <input readonly type="text" class="form-control page-input" id="user-name"
                                                name="username" value="{{full_name}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="user-dob"> NTNS </label>
                                            <input readonly type="text" class="form-control page-input" id="user-dob"
                                                name="userdob" value="{{dob}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="user-email"> Email </label>
                                            <input readonly type="text" class="form-control page-input" id="user-email"
                                                name="useremail" value="{{email}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="user-createdate"> Ngày tạo </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="user-createdate" name="usercreatedate" value="{{create_date}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="user-enddate"> Ngày hết hạn </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="user-enddate" name="userenddate" value="{{end_date}}">
                                        </div>
                                        <div class="col-md-4 form-group update-enddate-here">
                                            <label class="label-page" for="user-updateenddate"> Ngày gia hạn </label>
                                            <input type="date" class="form-control page-input" id="user-updateenddate"
                                                name="userupdateenddate" value="{{update_end_date}}">
                                        </div>
                                        <div class="col-md-12 form-group" style="text-align: right;">
                                            <a role="button" class="btn btn-outline-primary" id="btn-on-update-enddate">
                                                <i class="fa fa-money" aria-hidden="true"></i>
                                                Gia hạn
                                            </a>
                                            <a role="button" class="btn btn-outline-primary"
                                                id="btn-off-update-enddate">
                                                <i class="fa fa-power-off" aria-hidden="true"></i>
                                                Tắt gia hạn
                                            </a>
                                            <a role="button" class="btn btn-outline-success" id="btn-update-date-user">
                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                Lưu
                                            </a>
                                            <button type="submit" class="btn btn-outline-danger" id="btn-delete-user">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                Xóa
                                            </button>
                                            <a role="button" href="/admin-dashboard" class="btn btn-outline-dark">
                                                <i class="fa fa-backward" aria-hidden="true"></i>
                                                Quay lại
                                            </a>
                                        </div>
                                        {{/each}}
                                    </form>
                                    {{/ifEquals}}

                                    {{#ifEquals rolename "writer"}}
                                    <form class="row" method="POST" style="height: initial;"
                                        action="/admin-dashboard/deletewriter">
                                        {{#each writer}}
                                        <div class="col-md-2 form-group">
                                            <label class="label-page" for="writer-id"> #ID </label>
                                            <input readonly type="text" class="form-control page-input" id="writer-id"
                                                name="writerid" value="{{writer_id}}">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label class="label-page" for="writer-name"> Họ và tên </label>
                                            <input readonly type="text" class="form-control page-input" id="writer-name"
                                                name="writername" value="{{full_name}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="writer-dob"> NTNS </label>
                                            <input readonly type="text" class="form-control page-input" id="writer-dob"
                                                name="writerdob" value="{{dob}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="writer-email"> Email </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="writer-email" name="writeremail" value="{{email}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="writer-penname"> Bút danh </label>
                                            <input type="text" class="form-control page-input" id="writer-penname"
                                                name="writerpenname" value="{{pen_name}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="writer-postvalue"> Số lượng bài viết </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="writer-postvalue" name="writerpostvalue" value="{{postvalue}}">
                                        </div>
                                        <div class="col-md-12 form-group" style="text-align: right;">
                                            <a role="button" class="btn btn-outline-success"
                                                id="btn-update-penname-writer">
                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                Lưu
                                            </a>
                                            <button type="submit" class="btn btn-outline-danger" id="btn-delete-writer">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                Xóa
                                            </button>
                                            <a role="button" href="/admin-dashboard" class="btn btn-outline-dark">
                                                <i class="fa fa-backward" aria-hidden="true"></i>
                                                Quay lại
                                            </a>
                                        </div>
                                        {{/each}}
                                    </form>
                                    {{/ifEquals}}

                                    {{#ifEquals rolename "editor"}}
                                    <form class="row" method="POST" style="height: initial;"
                                        action="/admin-dashboard/deleteeditor">
                                        {{#with editor}}
                                        <div class="col-md-2 form-group">
                                            <label class="label-page" for="editor-id"> #ID </label>
                                            <input readonly type="text" class="form-control page-input" id="editor-id"
                                                name="editorid" value="{{editor_id}}">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label class="label-page" for="editor-name"> Họ và tên </label>
                                            <input readonly type="text" class="form-control page-input" id="editor-name"
                                                name="editorname" value="{{full_name}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="editor-dob"> NTNS </label>
                                            <input readonly type="text" class="form-control page-input" id="editor-dob"
                                                name="editordob" value="{{dob}}">
                                        </div>
                                        <div class="col-md-4 form-group">
                                            <label class="label-page" for="editor-email"> Email </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="editor-email" name="editoremail" value="{{email}}">
                                        </div>
                                        <div class="col-md-2 form-group">
                                            <label class="label-page" for="editor-categoryvalue"> Số chuyên mục </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="editor-categoryvalue" name="editorcategoryvalue"
                                                value="{{categoryvalue}}">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label class="label-page" for="editor-subcat"> Các chuyên mục phụ trách
                                            </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="editor-subcat" name="editorsubcat" value="{{editor_subcat}}">
                                        </div>
                                        {{/with}}

                                        <div class="col-md-6 form-group editor-remove-here">
                                            <label class="label-page" for="editor-subcat-remove"> Chuyên mục cần gỡ
                                                quyền </label>
                                            <select class="form-control" id="editor-subcat-remove"
                                                name="editorsubcatremove">
                                                <option value="" disabled selected> Chọn chuyên mục gỡ quyền phụ trách
                                                </option>
                                                {{#each editorsubcat}}
                                                <option class="popup-input" value="{{subcategory_id}}">
                                                    {{subcategory_name}}</option>
                                                {{/each}}
                                            </select>
                                        </div>
                                        <div class="col-md-6 form-group editor-add-here">
                                            <label class="label-page" for="editor-subcat-add"> Chuyên mục muốn phân
                                                quyền </label>
                                            <select class="form-control" id="editor-subcat-add" name="editorsubcatadd">
                                                <option value="" disabled selected> Chọn chuyên mục muốn phân quyền
                                                </option>
                                                {{#each subcatnoeditor.[0]}}
                                                <option class="popup-input" value="{{subid}}">{{subcategory_name}}
                                                </option>
                                                {{/each}}
                                            </select>
                                        </div>

                                        <div class="col-md-12 form-group" style="text-align: right;">
                                            <a role="button" class="btn btn-outline-warning" id="btn-backto-remove-add">
                                                <i class="fa fa-undo" aria-hidden="true"></i>
                                                Phân/Gỡ chuyên mục
                                            </a>
                                            <a role="button" class="btn btn-outline-info" id="btn-remove-subcat">
                                                <i class="fa fa-minus-square" aria-hidden="true"></i>
                                                Gỡ chuyên mục
                                            </a>
                                            <a role="button" class="btn btn-outline-success"
                                                id="btn-save-remove-subcat">
                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                Lưu
                                            </a>
                                            <a role="button" class="btn btn-outline-primary" id="btn-add-subcat">
                                                <i class="fa fa-plus-square" aria-hidden="true"></i>
                                                Phân chuyên mục
                                            </a>
                                            <a role="button" class="btn btn-outline-success" id="btn-save-add-subcat">
                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                Lưu
                                            </a>

                                            <button type="submit" class="btn btn-outline-danger" id="btn-delete-post">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                Xóa
                                            </button>
                                            <a role="button" href="/admin-dashboard" class="btn btn-outline-dark">
                                                <i class="fa fa-backward" aria-hidden="true"></i>
                                                Quay lại
                                            </a>
                                        </div>
                                    </form>
                                    {{/ifEquals}}
                                    {{/if}}
                                </div>
                            </div>

                            {{!-- Popup --}}
                            {{!-- <div class="row popup-background">
                                <div class="col-md-12 add-popup">
                                    <p class="popup-title"> THÊM NHÃN DÁN </p>
                                    <p class="popup-describe"> <span style="color: red;">(*) Lưu ý bắt buộc</span> phải
                                        nhập nhãn có kí tự <span style="color: red; font-weight: 700;">#</span> trong
                                        tên. <span style="text-decoration: underline;">Ví dụ</span>: #test.
                                    </p>
                                    <div class="form-group">
                                        <label class="label-popup" for="tag-name"> Nhãn dán </label>
                                        <input type="text" class="form-control popup-input" id="tag-name" name="tagname"
                                            placeholder="Nhập tên nhãn dán">
                                    </div>
                                    <div class="form-group" style="text-align: right;">
                                        <button type="submit" class="btn btn-success" id="btn-add-tag">Thêm </button>
                                        <button type="button" class="btn btn-dark close-btn"> Đóng
                                        </button>
                                    </div>
                                </div>
                            </div> --}}
                            <div class="row popup-notificationduedateSuccess">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO </p>
                                    <p class="popup-content"> Thay đổi <span style="color: rgb(40, 200, 0)">thành
                                            công</span> hạn sử dụng của Độc giả.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationpennameSuccess">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO </p>
                                    <p class="popup-content"> Thay đổi <span style="color: rgb(40, 200, 0)">thành
                                            công</span> tên bút danh của Phóng viên.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationremoveSuccess">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO </p>
                                    <p class="popup-content"> Gỡ <span style="color: rgb(40, 200, 0)">thành
                                            công</span> chuyên mục của Biên tập viên.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationaddSuccess">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO </p>
                                    <p class="popup-content"> Phân quyền phụ trách <span
                                            style="color: rgb(40, 200, 0)">thành công</span> chuyên mục của Biên tập
                                        viên.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationFailNotChoose">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO LỖI </p>
                                    <p class="popup-content"> Gỡ phân quyền cho chuyên mục <span style="color: red">thất
                                            bại</span> do chưa chọn chuyên mục để gỡ.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationFailAddNotChoose">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO LỖI </p>
                                    <p class="popup-content"> Phân quyền cho Biên tập viên <span style="color: red">thất
                                            bại</span> do chưa chọn chuyên mục.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationFailSetDate">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO LỖI </p>
                                    <p class="popup-content"> Thay đổi hạn sử dụng của Độc giả <span
                                            style="color: red">thất bại</span> do ngày gia hạn bé hơn ngày tạo tài
                                        khoản.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationFailSetPenName">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO LỖI </p>
                                    <p class="popup-content"> Thay đổi bút danh của Phóng viên <span
                                            style="color: red">thất bại</span> do bút danh này đã tồn tại.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                            <div class="row popup-notificationFailNotTyping">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO LỖI </p>
                                    <p class="popup-content"> Cập nhật bút danh của Phóng viên <span
                                            style="color: red">thất bại</span> do
                                        chưa nhập bút danh.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{!-- Bootstrap 4.3.1 --}}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    {{!-- JQuery 3.3.1 --}}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    {{!-- Script --}}
    <script>
        $(document).ready(function () {
            /* $(".add-category-main-btn").click(function () {
                $(".popup-background").show();
            });

            $(".add-tag-main-btn").click(function () {
                $(".popup-background").show();
            }); */

            $(".close-btn").click(function () {
                $(".popup-notificationremoveSuccess").hide();
                $(".popup-notificationaddSuccess").hide();
                $(".popup-notificationduedateSuccess").hide();
                $(".popup-notificationpennameSuccess").hide();
                $(".popup-notificationFailNotChoose").hide();
                $(".popup-notificationFailAddNotChoose").hide();
                $(".popup-notificationFailSetDate").hide();
                $(".popup-notificationFailSetPenName").hide();
                $(".popup-notificationFailNotTyping").hide();
            });

            $("#btn-on-update-enddate").click(function () {
                $(".update-enddate-here").show();
                $(".update-enddate-here").css("visibility", "visible");
                $(".update-enddate-here").css("opacity", "1");
                $("#btn-on-update-enddate").css("display", "none");
                $("#btn-off-update-enddate").css("display", "inline-block");
                $("#btn-update-date-user").css("display", "inline-block");
            })

            $("#btn-off-update-enddate").click(function () {
                $(".update-enddate-here").hide();
                $(".update-enddate-here").css("visibility", "hidden");
                $(".update-enddate-here").css("opacity", "0");
                $("#btn-off-update-enddate").css("display", "none");
                $("#btn-update-date-user").css("display", "none");
                $("#btn-on-update-enddate").css("display", "inline-block");
            })

            $("#btn-remove-subcat").click(function () {
                $(".editor-remove-here").show();
                $(".editor-remove-here").css("visibility", "visible");
                $(".editor-remove-here").css("opacity", "1");
                $("#btn-remove-subcat").css("display", "none");
                $("#btn-add-subcat").css("display", "none");
                $("#btn-save-remove-subcat").css("display", "inline-block");
                $("#btn-backto-remove-add").css("display", "inline-block");
            })

            $("#btn-add-subcat").click(function () {
                $(".editor-add-here").show();
                $(".editor-add-here").css("visibility", "visible");
                $(".editor-add-here").css("opacity", "1");
                $("#btn-add-subcat").css("display", "none");
                $("#btn-remove-subcat").css("display", "none");
                $("#btn-save-add-subcat").css("display", "inline-block");
                $("#btn-backto-remove-add").css("display", "inline-block");
            })

            $("#btn-backto-remove-add").click(function () {
                $(".editor-remove-here").hide();
                $(".editor-remove-here").css("visibility", "hidden");
                $(".editor-remove-here").css("opacity", "0");
                $(".editor-add-here").hide();
                $(".editor-add-here").css("visibility", "hidden");
                $(".editor-add-here").css("opacity", "0");
                $("#btn-remove-subcat").css("display", "inline-block");
                $("#btn-add-subcat").css("display", "inline-block");
                $("#btn-save-remove-subcat").css("display", "none");
                $("#btn-save-add-subcat").css("display", "none");
                $("#btn-backto-remove-add").css("display", "none");
            })


            function btnsupdateduedateClick() {
                // Create parameter
                var duedate = $("#user-updateenddate").val();
                var userid = $("#user-id").val()

                // Final action
                $.post("/admin-dashboard/updateduedate",
                    {
                        duedate: duedate,
                        userid: userid
                    },
                    function (result) {
                        if (result === "Success") {
                            $(".popup-notificationduedateSuccess").show();
                        } else if (result === "FailSetDate") {
                            $(".popup-notificationFailSetDate").show();
                        }
                    });
            }

            function btnsupdatepennameClick() {
                // Create parameter
                var penname = $("#writer-penname").val();
                var writerid = $("#writer-id").val()

                // Final action
                $.post("/admin-dashboard/updatepenname",
                    {
                        penname: penname,
                        writerid: writerid
                    },
                    function (result) {
                        if (result === "Success") {
                            $(".popup-notificationpennameSuccess").show();
                        } else if (result === "FailSetPenName") {
                            $(".popup-notificationFailSetPenName").show();
                        } else if (result === "FailNotTyping") {
                            $(".popup-notificationFailNotTyping").show();
                        }
                    });
            }

            function btnsaveremovesubcatClick() {
                // Create parameter
                var subcatid = $("select[name=editorsubcatremove]").val();
                var editorid = $("#editor-id").val()

                // Final action
                $.post("/admin-dashboard/updateremovesubcat",
                    {
                        subcatid: subcatid,
                        editorid: editorid
                    },
                    function (result) {
                        if (result === "Success") {
                            $(".popup-notificationremoveSuccess").show();
                        } else if (result === "FailNotChoose") {
                            $(".popup-notificationFailNotChoose").show();
                        }
                    });
            }

            function btnsaveaddsubcatClick() {
                // Create parameter
                var subcatid = $("select[name=editorsubcatadd]").val();
                var editorid = $("#editor-id").val()

                // Final action
                $.post("/admin-dashboard/updateaddsubcat",
                    {
                        subcatid: subcatid,
                        editorid: editorid
                    },
                    function (result) {
                        if (result === "Success") {
                            $(".popup-notificationaddSuccess").show();
                        } else if (result === "FailNotChoose") {
                            $(".popup-notificationFailAddNotChoose").show();
                        }
                    });
            }

            $("#btn-update-date-user").click(function () {
                btnsupdateduedateClick();
            })

            $("#btn-update-penname-writer").click(function () {
                btnsupdatepennameClick();
            })

            $("#btn-save-remove-subcat").click(function () {
                btnsaveremovesubcatClick();
            })

            $("#btn-save-add-subcat").click(function () {
                btnsaveaddsubcatClick();
            })
        })
    </script>
</body>

</html>