<!DOCTYPE html>
<html lang="en">

<head>
    {{> header}}
    <link rel="stylesheet" type="text/css" href="/css/admin-edit.css">
    <title> HNNews :: QTV :: Trang chủ </title>
</head>

<body>
    <div class="container">
        <div class="row" style="margin: 0;">
            {{!-- Navbar of Admin --}}
            <div class="col-md-1" style="padding: 0; height: initial !important;">
                <div class="row admin-nav">
                    <div class="col-md-11 nav-col-1st">
                        <div class="nav-top">
                            <a href="/admin-dashboard">
                                <img class="img-logo" src="/img/general/logo.png" alt="HN News">
                            </a>
                            <div class="line-support"></div>
                            <div class="row menu-bar">
                                <div class="col-md-12 row-img">
                                    <a class="img-click" href="">
                                        <img class="menu-icon active" src="/img/admin-menuicon/posts.png"></a>
                                </div>
                            </div>
                        </div>
                        <div class="nav-bottom">
                            <form method="POST" id="formAdminLogout" action="/admin-dashboard/logout"
                                style="height: initial; margin-bottom: 10px;">
                                <a href="javascript: $('#formAdminLogout').submit();" class="div-icon-logout"
                                    title="ĐĂNG XUẤT"> <i class="far fa-arrow-alt-circle-left icon-logout"
                                        aria-hidden="true"></i> </a>
                            </form>
                            <div class="line-support"></div>
                            <div style="height: initial;">
                                ADMIN PAGE
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1 nav-col-2nd">
                        <div class="shadowbox-admin-nav"></div>
                    </div>
                </div>
            </div>

            {{!-- Content --}}
            <div class="col-md-11 content-here">

                {{!-- Post --}}
                <div class="row content" id="admin-tag" style="margin: 0;">
                    <div class="col-md-12" style="padding: 0;">
                        {{!-- Topbar --}}
                        <div class="row top-bar">
                            <div class="col-md-8 topbar-title">
                                <div class="topbar-title-text-1"> QUẢN LÝ </div>
                                <div class="topbar-title-text-2"> DANH SÁCH BÀI VIẾT </div>
                            </div>
                            <div class="col-md-3 topbar-account">
                                <div class="topbar-account-text-1"> {{authAdmin.fullname}} </div>
                                <div class="topbar-account-text-2"> Quản trị viên </div>
                            </div>
                            <div class="col-md-1 topbar-avatar">
                                <img class="topbar-avatar-img" src="/img/general/admin-avatar.png">
                            </div>
                        </div>

                        {{!-- Content inside --}}
                        <div class="container-content-here">
                            {{!-- View --}}
                            <div class="row content-inside">
                                <div class="col-md-12 post-page">
                                    <div class="row post-page-title">
                                        <p class="page-title"> THÔNG TIN CHI TIẾT </p>
                                    </div>
                                    {{#if error}}
                                    <div class="row alert alert-danger" style="height: initial; margin: 20px 0px;"
                                        role="alert"> Không tìm thấy dữ liệu, lỗi bài viết. <a href="/admin-dashboard"
                                            class="alert-link"> &nbsp; Quay trở về</a>
                                    </div>
                                    {{else}}
                                    <form class="row" method="POST" style="height: initial;"
                                        action="/admin-dashboard/deletepost">
                                        {{#each post}}
                                        <div class="col-md-2 form-group">
                                            <label class="label-page" for="post-id"> #ID </label>
                                            <input readonly type="text" class="form-control page-input" id="post-id"
                                                name="postid" value="{{post_id}}">
                                        </div>
                                        <div class="col-md-7 form-group">
                                            <label class="label-page" for="post-title"> Tiêu đề bài viết </label>
                                            <input readonly type="text" class="form-control page-input" id="post-title"
                                                name="posttitle" value="{{title}}">
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-date"> Ngày đăng </label>
                                            <input readonly type="text" class="form-control page-input" id="post-date"
                                                name="postdate" value="{{finaldate}}">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label class="label-page" for="post-summary"> Nội dung tóm tắt </label>
                                            <textarea readonly type="text" class="form-control page-input"
                                                id="post-summary" name="postsummary"> {{summary}} </textarea>
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-category"> Chuyên mục cha </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="post-category" name="postcategory" value="{{category_name}}">
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-subcategory"> Chuyên mục con </label>
                                            <input readonly type="text" class="form-control page-input"
                                                id="post-subcategory" name="postsubcategory"
                                                value="{{subcategory_name}}">
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-view"> Lượt xem </label>
                                            <input readonly type="text" class="form-control page-input" id="post-view"
                                                name="postview" value="{{views}}">
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-writer"> Phóng viên </label>
                                            <input readonly type="text" class="form-control page-input" id="post-writer"
                                                name="postwriter" value="{{full_name}}">
                                        </div>
                                        <div class="col-md-9 form-group">
                                            <label class="label-page" for="post-tag"> Nhãn dán </label>
                                            <input readonly type="text" class="form-control page-input" id="post-tag"
                                                name="posttag" value="{{tagpost.data}}">
                                        </div>
                                        <div class="col-md-3 form-group">
                                            <label class="label-page" for="post-status"> Trạng thái </label>
                                            <select class="form-control page-input" id="post-status" name="poststatus">
                                                {{#ifEquals status_post "1"}}
                                                <option class="popup-input" value="1" selected> Đã xuất bản </option>
                                                <option class="popup-input" value="2"> Đã được duyệt và chờ xuất bản
                                                </option>
                                                <option class="popup-input" value="3"> Chưa được duyệt </option>
                                                <option class="popup-input" value="4"> Bị từ chối </option>
                                                {{/ifEquals}}
                                                {{#ifEquals status_post "2"}}
                                                <option class="popup-input" value="1"> Đã xuất bản </option>
                                                <option class="popup-input" value="2" selected> Đã được duyệt và chờ
                                                    xuất bản </option>
                                                <option class="popup-input" value="3"> Chưa được duyệt </option>
                                                <option class="popup-input" value="4"> Bị từ chối </option>
                                                {{/ifEquals}}
                                                {{#ifEquals status_post "3"}}
                                                <option class="popup-input" value="1"> Đã xuất bản </option>
                                                <option class="popup-input" value="2"> Đã được duyệt và chờ xuất bản
                                                </option>
                                                <option class="popup-input" value="3" selected> Chưa được duyệt
                                                </option>
                                                <option class="popup-input" value="4"> Bị từ chối </option>
                                                {{/ifEquals}}
                                                {{#ifEquals status_post "4"}}
                                                <option class="popup-input" value="1"> Đã xuất bản </option>
                                                <option class="popup-input" value="2"> Đã được duyệt và chờ xuất bản
                                                </option>
                                                <option class="popup-input" value="3"> Chưa được duyệt </option>
                                                <option class="popup-input" value="4" selected> Bị từ chối </option>
                                                {{/ifEquals}}
                                            </select>
                                        </div>

                                        <div class="col-md-12 form-group post-content-here">
                                            <label class="label-page" for="post-content"> Nội dung chi tiết bài viết
                                            </label>
                                            <div readonly class="row form-control page-input" id="post-content">
                                                <div class="col-md-12 eachpost-content">
                                                    {{{content}}}
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12 form-group" style="text-align: right;">
                                            <a role="button" class="btn btn-outline-primary" id="btn-show-content-post">
                                                <i class="fa fa-eye" aria-hidden="true"></i>
                                                Hiện nội dung bài viết
                                            </a>
                                            <a role="button" class="btn btn-outline-primary" id="btn-hide-content-post">
                                                <i class="fa fa-eye-slash" aria-hidden="true"></i>
                                                Ẩn nội dung bài viết
                                            </a>
                                            <a role="button" class="btn btn-outline-success" id="btn-update-post">
                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                Lưu
                                            </a>
                                            <button type="submit" class="btn btn-outline-danger" id="btn-delete-post">
                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                Xóa
                                            </button>
                                            <a role="button" href="/admin-dashboard" class="btn btn-outline-dark">
                                                <i class="fa fa-backward" aria-hidden="true"></i>
                                                Quay lại
                                            </a>
                                        </div>
                                        {{/each}}
                                    </form>
                                    {{/if}}
                                </div>
                            </div>

                            {{!-- Popup --}}
                            {{!-- <div class="row popup-background">
                                <div class="col-md-12 add-popup">
                                    <p class="popup-title"> THÊM NHÃN DÁN </p>
                                    <p class="popup-describe"> <span style="color: red;">(*) Lưu ý bắt buộc</span> phải
                                        nhập nhãn có kí tự <span style="color: red; font-weight: 700;">#</span> trong
                                        tên. <span style="text-decoration: underline;">Ví dụ</span>: #test.
                                    </p>
                                    <div class="form-group">
                                        <label class="label-popup" for="tag-name"> Nhãn dán </label>
                                        <input type="text" class="form-control popup-input" id="tag-name" name="tagname"
                                            placeholder="Nhập tên nhãn dán">
                                    </div>
                                    <div class="form-group" style="text-align: right;">
                                        <button type="submit" class="btn btn-success" id="btn-add-tag">Thêm </button>
                                        <button type="button" class="btn btn-dark close-btn"> Đóng
                                        </button>
                                    </div>
                                </div>
                            </div> --}}
                            <div class="row popup-notificationSuccess" id="editSuccess">
                                <div class="col-md-12 noti-popup">
                                    <p class="popup-title"> THÔNG BÁO </p>
                                    <p class="popup-content"> Bạn đã cập nhật <span style="color: rgb(40, 200, 0)">thành
                                            công</span> thuộc tính của bài viết.</p>
                                    <button type="button" class="btn btn-dark close-btn"> Đóng </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    {{!-- Bootstrap 4.3.1 --}}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    {{!-- JQuery 3.3.1 --}}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    {{!-- Script --}}
    <script>
        $(document).ready(function () {
            /* $(".add-category-main-btn").click(function () {
                $(".popup-background").show();
            });

            $(".add-tag-main-btn").click(function () {
                $(".popup-background").show();
            }); */

            $(".close-btn").click(function () {
                $(".popup-notificationSuccess").hide();
            });

            $("#editSuccess").children("div").children("button").click(function () {
                $(".popup-notificationSuccess").hide();
                window.location.reload();
            })

            $("#btn-show-content-post").click(function () {
                $(".post-content-here").show();
                $(".post-content-here").css("visibility", "visible");
                $(".post-content-here").css("opacity", "1");
                $("#btn-show-content-post").css("display", "none");
                $("#btn-hide-content-post").css("display", "inline-block");
            })

            $("#btn-hide-content-post").click(function () {
                $(".post-content-here").hide();
                $(".post-content-here").css("visibility", "hidden");
                $(".post-content-here").css("opacity", "0");
                $("#btn-show-content-post").css("display", "inline-block");
                $("#btn-hide-content-post").css("display", "none");
            })

            function btnupdatepostClick() {
                // Create parameter
                var id = $("#post-id").val();
                var poststatus = $("select[name=poststatus]").val()

                // Final action
                $.post("/admin-dashboard/updatepost",
                    {
                        id: id,
                        poststatus: poststatus
                    },
                    function (result) {
                        if (result === "Success") {
                            $(".popup-notificationSuccess").show();
                        }
                    });
            }

            $("#btn-update-post").click(function () {
                btnupdatepostClick();
            })

        })
    </script>
</body>

</html>